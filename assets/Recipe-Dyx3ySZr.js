import{j as e,t as O,w as M,v as P,k as v,x as E,r as a,s as T,y as A,z as B,B as m,A as N,C as U,o as W,n as z,R as q,D as G,E as y,L as b,F as D,G as Q}from"./index-yoXa5b76.js";import{r as H}from"./recipe_without_img-BDzgIXng.js";import{B as K}from"./BreadCrumbs-DwSYfv-d.js";const Z="_recipe_info_container_1izbg_1",J="_recipe_info_wrapper_1izbg_2",V="_recipe_img_1izbg_11",u={recipe_info_container:Z,recipe_info_wrapper:J,recipe_img:V},X="_ingredients_item_11x11_1",Y="_ingredients_img_11x11_8",ee="_ingredients_info_11x11_17",se="_ingredients_mesure_11x11_25",ie="_ingredients_list_11x11_29",re="_ingredients_subtitel_11x11_39",o={ingredients_item:X,ingredients_img:Y,ingredients_info:ee,ingredients_mesure:se,ingredients_list:ie,ingredients_subtitel:re},ne="/project-foodies-frontend/assets/ingredient_without_img-DgeLwZWu.jpg",te=({pathImg:s,name:i,mesure:r})=>e.jsxs("li",{className:o.ingredients_item,children:[e.jsx("img",{className:o.ingredients_img,src:s||ne,alt:`${i} image`}),e.jsxs("div",{className:o.ingredients_info,children:[e.jsx("p",{children:i}),e.jsx("p",{className:o.ingredients_mesure,children:r})]})]}),ae=({ingredients:s})=>e.jsx("ul",{className:o.ingredients_list,children:s.map(({ingredient:i,mesure:r})=>e.jsx(te,{pathImg:i.img,name:i.name,mesure:r},i._id))}),oe=({ingredients:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:o.ingredients_subtitel,children:"Ingredients"}),e.jsx(ae,{ingredients:s})]}),ce="_owner_card_12okm_1",_e="_owner_photo_12okm_6",pe="_owner_sign_12okm_12",le="_owner_primary_info_wrapper_12okm_18",de="_profile_big_card_icon_12okm_27",_={owner_card:ce,owner_photo:_e,owner_sign:pe,owner_primary_info_wrapper:le,profile_big_card_icon:de},me=({owner:s})=>{const{avatarURL:i,name:r,_id:n}=s;return e.jsxs(O,{to:`/user/${n}`,className:_.owner_card,children:[e.jsx("img",{className:_.owner_photo,src:i||M,alt:`${r} photo`}),e.jsxs("div",{className:_.owner_primary_info_wrapper,children:[e.jsx("span",{className:_.owner_sign,children:"Created by:"}),e.jsx("h4",{children:r})]})]})},ue="_tags_list_1c71s_1",ge="_tag_list_item_1c71s_7",I={tags_list:ue,tag_list_item:ge},xe=({tagInfo:s})=>e.jsx("li",{className:I.tag_list_item,children:Number(s)?`${s} min`:s}),je=({tags:s})=>{const i=Object.keys(s);return e.jsx("ul",{className:I.tags_list,children:i.map(r=>e.jsx(xe,{tagInfo:s[r]},P()))})},he="_recipe_main_info_wrapper_18n19_1",fe="_recipe_header_18n19_8",we="_recipe_description_18n19_14",g={recipe_main_info_wrapper:he,recipe_header:fe,recipe_description:we},ve=({data:s})=>{const{area:i,category:r,time:n,title:p,description:t,owner:c}=s;return e.jsxs("div",{className:g.recipe_main_info_wrapper,children:[e.jsx("h3",{className:g.recipe_header,children:p}),e.jsx(je,{tags:{area:i,category:r,time:n}}),e.jsx("p",{className:g.recipe_description,children:t}),e.jsx(me,{owner:c})]})},Ne=s=>s.split(`\r
`).filter(i=>i.trim()!=="").map(i=>`<p>${i}</p><br>`).join(""),Re="_recipe_preparation_h79hf_1",ye="_instruction_h79hf_10",R={recipe_preparation:Re,instruction:ye},be=({instruction:s})=>e.jsxs("div",{children:[e.jsx("h4",{className:R.recipe_preparation,children:"Recipe Preparation"}),e.jsx("div",{className:R.instruction,dangerouslySetInnerHTML:{__html:Ne(s)}})]}),Ie=({recipe:s})=>{const{thumb:i,title:r,instructions:n,ingredients:p,_id:t}=s,c=v(E),[k,l]=a.useState(c.includes(t)),S=v(T),[d,j]=a.useState(!1),[h,C]=a.useState(!0),[f,F]=a.useState(!1),[L]=A(),[$]=B();a.useEffect(()=>{l(c.includes(t))},[c,t]);const w=()=>{F(!f),C(!h)};return e.jsxs("section",{className:u.recipe_info_container,children:[e.jsx("img",{className:u.recipe_img,src:i!=="[object FileList]"?i:H,alt:r}),e.jsxs("div",{className:u.recipe_info_wrapper,children:[e.jsx(ve,{data:s}),e.jsx(oe,{ingredients:p}),e.jsx(be,{instruction:n}),S?k?e.jsx(m,{text:"Remove from favorites",variant:"add_favorite",onClick:()=>N($,t,"delete",l)}):e.jsx(m,{text:"Add to favorites",variant:"add_favorite",onClick:()=>N(L,t,"add",l)}):e.jsx(m,{text:"Add to favorites",variant:"add_favorite",onClick:()=>{j(!d)}})]}),e.jsxs(U,{isOpen:d,onClose:()=>j(!d),children:[f&&e.jsx(W,{handleClickSignIn:w}),h&&e.jsx(z,{handleClickSignUp:w})]})]})},ke="_header_popular_recipes_1qssd_1",Se="_popular_recipes_container_1qssd_9",Ce="_popular_recipes_list_1qssd_17",x={header_popular_recipes:ke,popular_recipes_container:Se,popular_recipes_list:Ce},Fe=({recipes:s})=>{const{data:i}=s;return e.jsxs("ul",{className:x.popular_recipes_list,children:[i.map(({recipe:r})=>e.jsx(q,{recipe:r},r._id))," "]})},Le=()=>{const{data:s,isLoading:i,error:r}=G();return e.jsxs("section",{className:x.popular_recipes_container,children:[r&&e.jsx(y,{to:"/error500",replace:!0}),e.jsx("h3",{className:x.header_popular_recipes,children:"Popular recipes"}),!r&&i?e.jsx(b,{}):e.jsx(Fe,{recipes:s})]})},$e="_recipeWrapper_1527r_1",Oe={recipeWrapper:$e},Te=()=>{const{id:s}=D(),{data:i,isLoading:r,error:n}=Q(s);return a.useEffect(()=>{window.scrollTo(0,0)},[s]),e.jsxs(e.Fragment,{children:[n&&e.jsx(y,{to:"/error500",replace:!0}),!n&&e.jsxs("main",{className:Oe.recipeWrapper,children:[i&&e.jsx(K,{currentPage:i.data.title}),r?e.jsx(b,{}):e.jsx(Ie,{recipe:i.data}),e.jsx(Le,{})]})]})};export{Te as default};
